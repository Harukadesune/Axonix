{"remainingRequest":"/Users/haruka/IdeaProjects/Axonix/Foies_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haruka/IdeaProjects/Axonix/Foies_vue/src/views/Notifications/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/haruka/IdeaProjects/Axonix/Foies_vue/src/views/Notifications/index.vue","mtime":1745308249742},{"path":"/Users/haruka/IdeaProjects/Axonix/Foies_vue/node_modules/cache-loader/dist/cjs.js","mtime":1745391003736},{"path":"/Users/haruka/IdeaProjects/Axonix/Foies_vue/node_modules/babel-loader/lib/index.js","mtime":1745391003757},{"path":"/Users/haruka/IdeaProjects/Axonix/Foies_vue/node_modules/cache-loader/dist/cjs.js","mtime":1745391003736},{"path":"/Users/haruka/IdeaProjects/Axonix/Foies_vue/node_modules/vue-loader/lib/index.js","mtime":1745391002124}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBOb3RpZmljYXRpb25BUEkgZnJvbSAnQC9hcGkvbm90aWZpY2F0aW9uc19hcGknOwppbXBvcnQgQWRtaW5BUEkgZnJvbSAnQC9hcGkvYWRtaW5fYXBpJzsgLy8g5a+85YWl566h55CG5ZGYIEFQSQoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBub3RpZmljYXRpb25zOiBbXSwKICAgICAgdG90YWxSZWNvcmRzOiAwLCAvLyDmt7vliqDorrDlvZXmlbAKICAgICAgc2VsZWN0ZWROb3RpZmljYXRpb25zOiBbXSwKICAgICAgc2VhcmNoRm9ybTogewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBjb250ZW50OiAnJwogICAgICB9LAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwgIC8vIOaOp+WItuW8ueWHuuahhuaYvuekugogICAgICBub3RpZmljYXRpb246IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBhZG1pbklkOiBudWxsLCAgLy8g566h55CG5ZGYSUTvvIzpu5jorqTlgLzkuLpudWxsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgIHNlbmRUaW1lOiAnJywKICAgICAgICBjcmVhdGVkQXQ6ICcnLAogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHRpdGxlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpemAmuefpeagh+mimCcsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBjb250ZW50OiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpemAmuefpeWGheWuuScsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBzZW5kVGltZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nlj5HpgIHml7bpl7QnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwKICAgICAgICBhZG1pbklkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+euoeeQhuWRmElE5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaE5vdGlmaWNhdGlvbnMoKTsKICAgIHRoaXMuZmV0Y2hBZG1pbklkKCk7ICAvLyDojrflj5bnrqHnkIblkZhJRAogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZmV0Y2hOb3RpZmljYXRpb25zKCkgewogICAgICBjb25zdCBleGFtcGxlID0gewogICAgICAgIG9yZWRDcml0ZXJpYTogW3sgY3JpdGVyaWE6IFtdIH1dCiAgICAgIH07CgogICAgICBpZiAodGhpcy5zZWFyY2hGb3JtLnRpdGxlKSB7CiAgICAgICAgZXhhbXBsZS5vcmVkQ3JpdGVyaWFbMF0uY3JpdGVyaWEucHVzaCh7CiAgICAgICAgICBjb25kaXRpb246ICJ0aXRsZSBMSUtFIiwKICAgICAgICAgIHZhbHVlOiBgJSR7dGhpcy5zZWFyY2hGb3JtLnRpdGxlfSVgLAogICAgICAgICAgc2luZ2xlVmFsdWU6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VhcmNoRm9ybS5jb250ZW50KSB7CiAgICAgICAgZXhhbXBsZS5vcmVkQ3JpdGVyaWFbMF0uY3JpdGVyaWEucHVzaCh7CiAgICAgICAgICBjb25kaXRpb246ICJjb250ZW50IExJS0UiLAogICAgICAgICAgdmFsdWU6IGAlJHt0aGlzLnNlYXJjaEZvcm0uY29udGVudH0lYCwKICAgICAgICAgIHNpbmdsZVZhbHVlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBOb3RpZmljYXRpb25BUEkuZ2V0Tm90aWZpY2F0aW9uc0J5RXhhbXBsZVdpdGhCTE9CcyhleGFtcGxlKTsKICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBjb25zdCBjb3VudFJlc3BvbnNlID0gYXdhaXQgTm90aWZpY2F0aW9uQVBJLmNvdW50Tm90aWZpY2F0aW9ucyhleGFtcGxlKTsKICAgICAgICB0aGlzLnRvdGFsUmVjb3JkcyA9IGNvdW50UmVzcG9uc2UuZGF0YTsgLy8g5YGH6K6+6L+U5Zue55qE5piv6K6w5b2V5oC75pWwCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W6YCa55+l5YiX6KGo5aSx6LSlJywgZXJyb3IpOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGZldGNoQWRtaW5JZCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEFkbWluQVBJLmdldEFkbWlucyh7fSk7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAvLyDlgYforr7ov5Tlm57nrKzkuIDkuKrnrqHnkIblkZhJRO+8jOaCqOWPr+S7peagueaNruWunumZheaDheWGteWkhOeQhgogICAgICAgICAgdGhpcy5ub3RpZmljYXRpb24uYWRtaW5JZCA9IHJlc3BvbnNlLmRhdGFbMF0uaWQ7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPlueuoeeQhuWRmOS/oeaBr+Wksei0pScsIGVycm9yKTsKICAgICAgfQogICAgfSwKCiAgICByZXNldFNlYXJjaCgpIHsKICAgICAgdGhpcy5zZWFyY2hGb3JtID0geyB0aXRsZTogJycsIGNvbnRlbnQ6ICcnIH07CiAgICAgIHRoaXMuZmV0Y2hOb3RpZmljYXRpb25zKCk7CiAgICB9LAoKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShzZWxlY3Rpb24pIHsKICAgICAgdGhpcy5zZWxlY3RlZE5vdGlmaWNhdGlvbnMgPSBzZWxlY3Rpb24ubWFwKG5vdGlmaWNhdGlvbiA9PiBub3RpZmljYXRpb24uaWQpOwogICAgfSwKCiAgICBoYW5kbGVBZGQoKSB7CiAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gewogICAgICAgIGlkOiBudWxsLAogICAgICAgIGFkbWluSWQ6IHRoaXMubm90aWZpY2F0aW9uLmFkbWluSWQsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgIHNlbmRUaW1lOiAnJywKICAgICAgICBjcmVhdGVkQXQ6ICcnLAogICAgICB9OwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKCiAgICBoYW5kbGVFZGl0KG5vdGlmaWNhdGlvbikgewogICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IHsgLi4ubm90aWZpY2F0aW9uIH07CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAoKICAgIGFzeW5jIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMubm90aWZpY2F0aW9uRm9ybS52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICh0aGlzLm5vdGlmaWNhdGlvbi5pZCkgewogICAgICAgICAgICAgIGF3YWl0IE5vdGlmaWNhdGlvbkFQSS51cGRhdGVOb3RpZmljYXRpb25CeUlkV2l0aEJMT0JzKHRoaXMubm90aWZpY2F0aW9uKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBhd2FpdCBOb3RpZmljYXRpb25BUEkuYWRkTm90aWZpY2F0aW9uU2VsZWN0aXZlKHRoaXMubm90aWZpY2F0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+mAmuefpeS/oeaBr+S/neWtmOaIkOWKnycpOwogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5mZXRjaE5vdGlmaWNhdGlvbnMoKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/neWtmOmAmuefpeS/oeaBr+Wksei0pScpOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAoKICAgIGNvbmZpcm1CYXRjaERlbGV0ZSgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWROb3RpZmljYXRpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrpropoHliKDpmaTpgInkuK3nmoTpgJrnn6XlkJfvvJ8nLCAn6K2m5ZGKJywgewogICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB0aGlzLmhhbmRsZUJhdGNoRGVsZXRlKCkpCiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7CiAgICB9LAoKICAgIGFzeW5jIGhhbmRsZUJhdGNoRGVsZXRlKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGV4YW1wbGUgPSB7CiAgICAgICAgICBvcmVkQ3JpdGVyaWE6IFt7IGNyaXRlcmlhOiBbXSB9XQogICAgICAgIH07CiAgICAgICAgYXdhaXQgTm90aWZpY2F0aW9uQVBJLmRlbGV0ZU5vdGlmaWNhdGlvbkJ5RXhhbXBsZShleGFtcGxlKTsKICAgICAgICB0aGlzLmZldGNoTm90aWZpY2F0aW9ucygpOwogICAgICAgIHRoaXMuc2VsZWN0ZWROb3RpZmljYXRpb25zID0gW107CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmibnph4/liKDpmaTmiJDlip8nKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmibnph4/liKDpmaTlpLHotKUnLCBlcnJvcik7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgaGFuZGxlRGVsZXRlKGlkKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8g5pi+56S656Gu6K6k5a+56K+d5qGGCiAgICAgICAgYXdhaXQgdGhpcy4kY29uZmlybSgn56Gu5a6a6KaB5Yig6Zmk6L+Z5p2h6YCa55+l5ZCX77yfJywgJ+aPkOekuicsIHsKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAnZWwtYnV0dG9uLS1kYW5nZXInLAogICAgICAgICAgY2xvc2VPbkNsaWNrTW9kYWw6IGZhbHNlLAogICAgICAgICAgYmVmb3JlQ2xvc2U6IGFzeW5jIChhY3Rpb24sIGluc3RhbmNlLCBkb25lKSA9PiB7CiAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdjb25maXJtJykgewogICAgICAgICAgICAgIGluc3RhbmNlLmNvbmZpcm1CdXR0b25Mb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYXdhaXQgTm90aWZpY2F0aW9uQVBJLmRlbGV0ZU5vdGlmaWNhdGlvbkJ5SWQoaWQpOwogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hOb3RpZmljYXRpb25zKCk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIoOmZpOWksei0pScsIGVycm9yKTsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWksei0pScpOwogICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbmZpcm1CdXR0b25Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBkb25lKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGRvbmUoKTsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iOWIoOmZpCcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yICE9PSAnY2FuY2VsJykgewogICAgICAgICAgY29uc29sZS5lcnJvcign5Yig6Zmk5aSE55CG5byC5bi4JywgZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgcmV0dXJuIGRhdGUgPyBuZXcgRGF0ZShkYXRlKS50b0xvY2FsZVN0cmluZygpIDogIuaXoCI7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA8EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Notifications","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!-- 搜索表单 -->\n    <el-form :inline=\"true\" :model=\"searchForm\" class=\"search-form\">\n      <el-form-item label=\"标题\">\n        <el-input v-model=\"searchForm.title\" placeholder=\"请输入通知标题\" clearable />\n      </el-form-item>\n      <el-form-item label=\"内容\">\n        <el-input v-model=\"searchForm.content\" placeholder=\"请输入通知内容\" clearable />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"fetchNotifications\">查询</el-button>\n        <el-button @click=\"resetSearch\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <!-- 操作按钮和记录数显示 -->\n    <el-row class=\"action-row\" type=\"flex\" justify=\"space-between\" align=\"middle\">\n      <el-col :span=\"8\">\n        <el-button type=\"primary\" @click=\"handleAdd\">添加通知</el-button>\n        <el-button type=\"danger\" @click=\"confirmBatchDelete\"\n          :disabled=\"selectedNotifications.length === 0\">批量删除</el-button>\n      </el-col>\n      <el-col :span=\"8\" class=\"record-count\" style=\"text-align: right;\">\n        <span>当前共有 {{ totalRecords }} 条记录</span>\n      </el-col>\n    </el-row>\n\n    <!-- 通知表格 -->\n    <el-table :data=\"notifications\" border @selection-change=\"handleSelectionChange\" :empty-text=\"'没有数据'\">\n      <el-table-column type=\"selection\" width=\"50\" />\n      <el-table-column prop=\"id\" label=\"ID\" />\n      <el-table-column prop=\"title\" label=\"标题\" />\n      <el-table-column prop=\"content\" label=\"内容\" />\n      <el-table-column prop=\"adminId\" label=\"管理员ID\" />\n      <el-table-column prop=\"sendTime\" label=\"发送时间\">\n        <template slot-scope=\"scope\">{{ formatDate(scope.row.sendTime) }}</template>\n      </el-table-column>\n      <el-table-column prop=\"createdAt\" label=\"创建时间\">\n        <template slot-scope=\"scope\">{{ formatDate(scope.row.createdAt) }}</template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"160\" fixed=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" @click=\"handleEdit(scope.row)\">编辑</el-button>\n          <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.row.id)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 添加/编辑通知弹出框 -->\n    <el-dialog :visible.sync=\"dialogVisible\" title=\"通知信息\" width=\"600px\">\n      <el-form ref=\"notificationForm\" :model=\"notification\" :rules=\"rules\" label-width=\"100px\">\n        <el-form-item label=\"标题\" prop=\"title\">\n          <el-input v-model=\"notification.title\" />\n        </el-form-item>\n\n        <el-form-item label=\"内容\" prop=\"content\">\n          <el-input v-model=\"notification.content\" />\n        </el-form-item>\n\n        <el-form-item label=\"管理员ID\" prop=\"adminId\">\n          <el-input v-model=\"notification.adminId\" :disabled=\"true\" />\n        </el-form-item>\n\n        <el-form-item label=\"发送时间\" prop=\"sendTime\">\n          <el-date-picker v-model=\"notification.sendTime\" type=\"datetime\" placeholder=\"选择发送时间\" />\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm\">保存</el-button>\n          <el-button @click=\"closeDialog\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport NotificationAPI from '@/api/notifications_api';\nimport AdminAPI from '@/api/admin_api'; // 导入管理员 API\n\nexport default {\n  data() {\n    return {\n      notifications: [],\n      totalRecords: 0, // 添加记录数\n      selectedNotifications: [],\n      searchForm: {\n        title: '',\n        content: ''\n      },\n      dialogVisible: false,  // 控制弹出框显示\n      notification: {\n        id: null,\n        adminId: null,  // 管理员ID，默认值为null\n        title: '',\n        content: '',\n        sendTime: '',\n        createdAt: '',\n      },\n      rules: {\n        title: [{ required: true, message: '请输入通知标题', trigger: 'blur' }],\n        content: [{ required: true, message: '请输入通知内容', trigger: 'blur' }],\n        sendTime: [{ required: true, message: '请选择发送时间', trigger: 'change' }],\n        adminId: [{ required: true, message: '管理员ID不能为空', trigger: 'blur' }]\n      }\n    };\n  },\n  created() {\n    this.fetchNotifications();\n    this.fetchAdminId();  // 获取管理员ID\n  },\n  methods: {\n    async fetchNotifications() {\n      const example = {\n        oredCriteria: [{ criteria: [] }]\n      };\n\n      if (this.searchForm.title) {\n        example.oredCriteria[0].criteria.push({\n          condition: \"title LIKE\",\n          value: `%${this.searchForm.title}%`,\n          singleValue: true\n        });\n      }\n\n      if (this.searchForm.content) {\n        example.oredCriteria[0].criteria.push({\n          condition: \"content LIKE\",\n          value: `%${this.searchForm.content}%`,\n          singleValue: true\n        });\n      }\n\n      try {\n        const response = await NotificationAPI.getNotificationsByExampleWithBLOBs(example);\n        this.notifications = response.data;\n\n        const countResponse = await NotificationAPI.countNotifications(example);\n        this.totalRecords = countResponse.data; // 假设返回的是记录总数\n      } catch (error) {\n        console.error('获取通知列表失败', error);\n      }\n    },\n\n    async fetchAdminId() {\n      try {\n        const response = await AdminAPI.getAdmins({});\n        if (response.data && response.data.length > 0) {\n          // 假设返回第一个管理员ID，您可以根据实际情况处理\n          this.notification.adminId = response.data[0].id;\n        }\n      } catch (error) {\n        console.error('获取管理员信息失败', error);\n      }\n    },\n\n    resetSearch() {\n      this.searchForm = { title: '', content: '' };\n      this.fetchNotifications();\n    },\n\n    handleSelectionChange(selection) {\n      this.selectedNotifications = selection.map(notification => notification.id);\n    },\n\n    handleAdd() {\n      this.notification = {\n        id: null,\n        adminId: this.notification.adminId,\n        title: '',\n        content: '',\n        sendTime: '',\n        createdAt: '',\n      };\n      this.dialogVisible = true;\n    },\n\n    handleEdit(notification) {\n      this.notification = { ...notification };\n      this.dialogVisible = true;\n    },\n\n    async submitForm() {\n      this.$refs.notificationForm.validate(async (valid) => {\n        if (valid) {\n          try {\n            if (this.notification.id) {\n              await NotificationAPI.updateNotificationByIdWithBLOBs(this.notification);\n            } else {\n              await NotificationAPI.addNotificationSelective(this.notification);\n            }\n            this.$message.success('通知信息保存成功');\n            this.dialogVisible = false;\n            this.fetchNotifications();\n          } catch (error) {\n            this.$message.error('保存通知信息失败');\n            console.error(error);\n          }\n        }\n      });\n    },\n\n    closeDialog() {\n      this.dialogVisible = false;\n    },\n\n    confirmBatchDelete() {\n      if (this.selectedNotifications.length === 0) return;\n      this.$confirm('确定要删除选中的通知吗？', '警告', {\n        type: 'warning',\n        cancelButtonText: '取消',\n        confirmButtonText: '确定'\n      })\n        .then(() => this.handleBatchDelete())\n        .catch(() => { });\n    },\n\n    async handleBatchDelete() {\n      try {\n        const example = {\n          oredCriteria: [{ criteria: [] }]\n        };\n        await NotificationAPI.deleteNotificationByExample(example);\n        this.fetchNotifications();\n        this.selectedNotifications = [];\n        this.$message.success('批量删除成功');\n      } catch (error) {\n        console.error('批量删除失败', error);\n      }\n    },\n\n    async handleDelete(id) {\n      try {\n        // 显示确认对话框\n        await this.$confirm('确定要删除这条通知吗？', '提示', {\n          type: 'warning',\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          confirmButtonClass: 'el-button--danger',\n          closeOnClickModal: false,\n          beforeClose: async (action, instance, done) => {\n            if (action === 'confirm') {\n              instance.confirmButtonLoading = true;\n              try {\n                await NotificationAPI.deleteNotificationById(id);\n                this.$message.success('删除成功');\n                this.fetchNotifications();\n              } catch (error) {\n                console.error('删除失败', error);\n                this.$message.error('删除失败');\n                throw error;\n              } finally {\n                instance.confirmButtonLoading = false;\n                done();\n              }\n            } else {\n              done();\n              this.$message.info('已取消删除');\n            }\n          }\n        });\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('删除处理异常', error);\n        }\n      }\n    },\n\n    formatDate(date) {\n      return date ? new Date(date).toLocaleString() : \"无\";\n    }\n  }\n};\n</script>\n\n<style scoped>\n.app-container {\n  padding: 20px;\n}\n\n.el-table {\n  margin-top: 20px;\n}\n\n.el-button {\n  margin-right: 5px;\n}\n\n.search-form {\n  margin-bottom: 0px;\n}\n\n.record-count {\n  margin-top: 20px;\n  font-size: 14px;\n  color: #606266;\n}\n</style>"]}]}